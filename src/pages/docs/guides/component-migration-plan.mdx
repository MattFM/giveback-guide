---
layout: ../../../layouts/DocsLayout.astro
title: Component Migration Plan
description: Hybrid component organization strategy for Giveback Guide
---

# Component Migration Plan - Hybrid Organization (Option 3)

**Date:** October 15, 2025  
**Project:** Giveback Guide  
**Strategy:** Hybrid component organization with design system foundation

---

## Overview

This plan outlines the migration from the current flat component structure to a hybrid organizational system that separates reusable UI components, layout elements, content displays, page sections, and feature-specific functionality.

### Goals
1. ✅ Improve component discoverability
2. ✅ Enable design token implementation
3. ✅ Scale for future features
4. ✅ Maintain clear separation of concerns
5. ✅ Minimize import path changes

---

## New Structure

```
src/components/
├── ui/                   # Reusable design system components
├── layout/               # Layout components
├── content/              # Content display components
├── sections/             # Page sections
├── features/             # Feature-specific functionality
└── utility/              # Meta/utility components
```

---

## Phase 1: Create New Directory Structure

**Action:** Create the new folder hierarchy

```bash
# From project root
mkdir -p src/components/ui/Dropdown
mkdir -p src/components/ui/Image
mkdir -p src/components/layout
mkdir -p src/components/content
mkdir -p src/components/sections
mkdir -p src/components/features/save
mkdir -p src/components/features/ads
mkdir -p src/components/features/popups
mkdir -p src/components/utility
```

**Duration:** 2 minutes  
**Risk:** Low  
**Testing Required:** No

---

## Phase 2: Move Components (By Category)

### 2.1 UI Components (Design System)

**Dropdowns - Create base component and variants**

| Current Path | New Path | Notes |
|--------------|----------|-------|
| `BTagsDropdown.astro` | `ui/Dropdown/BlogTagsDropdown.astro` | Rename for clarity |
| `PCategoryDropdown.astro` | `ui/Dropdown/ProjectCategoryDropdown.astro` | Rename for clarity |
| `PCountryDropdown.astro` | `ui/Dropdown/ProjectCountryDropdown.astro` | Rename for clarity |
| `PLocaleDropdown.astro` | `ui/Dropdown/ProjectLocaleDropdown.astro` | Rename for clarity |
| `SCountryDropdown.astro` | `ui/Dropdown/StayCountryDropdown.astro` | Rename for clarity |
| `SLocaleDropdown.astro` | `ui/Dropdown/StayLocaleDropdown.astro` | Rename for clarity |

**Action:**
```bash
# Move and rename dropdowns
mv src/components/BTagsDropdown.astro src/components/ui/Dropdown/BlogTagsDropdown.astro
mv src/components/PCategoryDropdown.astro src/components/ui/Dropdown/ProjectCategoryDropdown.astro
mv src/components/PCountryDropdown.astro src/components/ui/Dropdown/ProjectCountryDropdown.astro
mv src/components/PLocaleDropdown.astro src/components/ui/Dropdown/ProjectLocaleDropdown.astro
mv src/components/SCountryDropdown.astro src/components/ui/Dropdown/StayCountryDropdown.astro
mv src/components/SLocaleDropdown.astro src/components/ui/Dropdown/StayLocaleDropdown.astro
```

**Images**

| Current Path | New Path | Notes |
|--------------|----------|-------|
| `ResponsiveImage.astro` | `ui/Image/ResponsiveImage.astro` | Group related images |
| `ResponsiveImageWithSkeleton.astro` | `ui/Image/ResponsiveImageWithSkeleton.astro` | Group related images |

**Action:**
```bash
# Move images
mv src/components/ResponsiveImage.astro src/components/ui/Image/ResponsiveImage.astro
mv src/components/ResponsiveImageWithSkeleton.astro src/components/ui/Image/ResponsiveImageWithSkeleton.astro
```

**Duration:** 10 minutes  
**Risk:** Medium (requires import updates)  
**Testing Required:** Yes

---

### 2.2 Layout Components

| Current Path | New Path | Notes |
|--------------|----------|-------|
| `Header.astro` | `layout/Header.astro` | Core navigation |
| `HeaderLink.astro` | `layout/HeaderLink.astro` | Navigation element |
| `Footer.astro` | `layout/Footer.astro` | Core footer |
| `BaseHead.astro` | `layout/BaseHead.astro` | HTML head meta |

**Action:**
```bash
# Move layout components
mv src/components/Header.astro src/components/layout/Header.astro
mv src/components/HeaderLink.astro src/components/layout/HeaderLink.astro
mv src/components/Footer.astro src/components/layout/Footer.astro
mv src/components/BaseHead.astro src/components/layout/BaseHead.astro
```

**Duration:** 5 minutes  
**Risk:** High (used in layouts - many imports)  
**Testing Required:** Yes (critical path)

---

### 2.3 Content Display Components

| Current Path | New Path | Notes |
|--------------|----------|-------|
| `PostCard.astro` | `content/PostCard.astro` | Blog post cards |
| `ProjectCard.astro` | `content/ProjectCard.astro` | Project cards |
| `StayCard.astro` | `content/StayCard.astro` | Accommodation cards |
| `ProjectsToolbar.astro` | `content/ProjectsToolbar.astro` | Filtering toolbar |
| `FormattedDate.astro` | `content/FormattedDate.astro` | Date formatting |

**Action:**
```bash
# Move content components
mv src/components/PostCard.astro src/components/content/PostCard.astro
mv src/components/ProjectCard.astro src/components/content/ProjectCard.astro
mv src/components/StayCard.astro src/components/content/StayCard.astro
mv src/components/ProjectsToolbar.astro src/components/content/ProjectsToolbar.astro
mv src/components/FormattedDate.astro src/components/content/FormattedDate.astro
```

**Duration:** 5 minutes  
**Risk:** Medium (used in multiple pages)  
**Testing Required:** Yes

---

### 2.4 Section Components (Page Sections)

| Current Path | New Path | Notes |
|--------------|----------|-------|
| `Homepage/HomeHero.astro` | `sections/HomeHero.astro` | Homepage hero |
| `Homepage/LatestPosts.astro` | `sections/LatestPosts.astro` | Blog section |
| `Homepage/LatestProjects.astro` | `sections/LatestProjects.astro` | Projects section |
| `Homepage/LatestStays.astro` | `sections/LatestStays.astro` | Stays section |
| `Projects/SupportBox.astro` | `sections/SupportBox.astro` | Support CTA |

**Action:**
```bash
# Move section components
mv src/components/Homepage/HomeHero.astro src/components/sections/HomeHero.astro
mv src/components/Homepage/LatestPosts.astro src/components/sections/LatestPosts.astro
mv src/components/Homepage/LatestProjects.astro src/components/sections/LatestProjects.astro
mv src/components/Homepage/LatestStays.astro src/components/sections/LatestStays.astro
mv src/components/Projects/SupportBox.astro src/components/sections/SupportBox.astro

# Remove empty directories
rmdir src/components/Homepage
rmdir src/components/Projects
```

**Duration:** 5 minutes  
**Risk:** Low (mostly used in specific pages)  
**Testing Required:** Yes

---

### 2.5 Feature Components

| Current Path | New Path | Notes |
|--------------|----------|-------|
| `Save/SaveToList.astro` | `features/save/SaveToList.astro` | Save functionality |
| `Save/saveToList.client.js` | `features/save/saveToList.client.js` | Client script |
| `Ads/AdBox.astro` | `features/ads/AdBox.astro` | Advertising |
| `Popups/SubscribeDrawer.astro` | `features/popups/SubscribeDrawer.astro` | Email subscribe |
| `Announcement.astro` | `features/popups/Announcement.astro` | Site announcements |

**Action:**
```bash
# Move feature components
mv src/components/Save/SaveToList.astro src/components/features/save/SaveToList.astro
mv src/components/Save/saveToList.client.js src/components/features/save/saveToList.client.js
mv src/components/Ads/AdBox.astro src/components/features/ads/AdBox.astro
mv src/components/Popups/SubscribeDrawer.astro src/components/features/popups/SubscribeDrawer.astro
mv src/components/Announcement.astro src/components/features/popups/Announcement.astro

# Remove empty directories
rmdir src/components/Save
rmdir src/components/Ads
rmdir src/components/Popups
```

**Duration:** 5 minutes  
**Risk:** Low  
**Testing Required:** Yes

---

### 2.6 Utility Components

| Current Path | New Path | Notes |
|--------------|----------|-------|
| `Analytics.astro` | `utility/Analytics.astro` | Analytics scripts |
| `TestListsClient.astro` | `utility/TestListsClient.astro` | Testing component |

**Action:**
```bash
# Move utility components
mv src/components/Analytics.astro src/components/utility/Analytics.astro
mv src/components/TestListsClient.astro src/components/utility/TestListsClient.astro
```

**Duration:** 2 minutes  
**Risk:** Low  
**Testing Required:** Yes

---

## Phase 3: Update Import Paths

After moving components, update all import statements across the codebase.

### 3.1 Find All Component Imports

**Action:**
```bash
# Search for all component imports
grep -r "from.*components/" src/pages --include="*.astro"
grep -r "from.*components/" src/layouts --include="*.astro"
grep -r "from.*components/" src/components --include="*.astro"
```

**Duration:** 5 minutes  
**Risk:** Low (discovery only)  
**Testing Required:** No

---

### 3.2 Update Import Patterns

**Common patterns to update:**

| Old Import | New Import |
|------------|------------|
| `import Header from '@/components/Header.astro'` | `import Header from '@/components/layout/Header.astro'` |
| `import Footer from '@/components/Footer.astro'` | `import Footer from '@/components/layout/Footer.astro'` |
| `import BaseHead from '@/components/BaseHead.astro'` | `import BaseHead from '@/components/layout/BaseHead.astro'` |
| `import PostCard from '@/components/PostCard.astro'` | `import PostCard from '@/components/content/PostCard.astro'` |
| `import ProjectCard from '@/components/ProjectCard.astro'` | `import ProjectCard from '@/components/content/ProjectCard.astro'` |
| `import StayCard from '@/components/StayCard.astro'` | `import StayCard from '@/components/content/StayCard.astro'` |
| `import HomeHero from '@/components/Homepage/HomeHero.astro'` | `import HomeHero from '@/components/sections/HomeHero.astro'` |
| `import SaveToList from '@/components/Save/SaveToList.astro'` | `import SaveToList from '@/components/features/save/SaveToList.astro'` |
| `import AdBox from '@/components/Ads/AdBox.astro'` | `import AdBox from '@/components/features/ads/AdBox.astro'` |
| `import Analytics from '@/components/Analytics.astro'` | `import Analytics from '@/components/utility/Analytics.astro'` |

**Key Files to Update:**
1. `src/layouts/MainLayout.astro` - Header, Footer, BaseHead, Analytics
2. `src/pages/index.astro` - HomeHero, Latest* sections
3. All blog pages - PostCard, FormattedDate
4. All project pages - ProjectCard, dropdowns, toolbars
5. All stay pages - StayCard, dropdowns

**Duration:** 30-45 minutes  
**Risk:** High (breaking changes if missed)  
**Testing Required:** Yes (comprehensive)

---

## Phase 4: Create Index Files (Optional but Recommended)

Create barrel exports for cleaner imports.

### 4.1 UI Index

**Create:** `src/components/ui/index.ts`

```typescript
// Dropdown components
export { default as BlogTagsDropdown } from './Dropdown/BlogTagsDropdown.astro';
export { default as ProjectCategoryDropdown } from './Dropdown/ProjectCategoryDropdown.astro';
export { default as ProjectCountryDropdown } from './Dropdown/ProjectCountryDropdown.astro';
export { default as ProjectLocaleDropdown } from './Dropdown/ProjectLocaleDropdown.astro';
export { default as StayCountryDropdown } from './Dropdown/StayCountryDropdown.astro';
export { default as StayLocaleDropdown } from './Dropdown/StayLocaleDropdown.astro';

// Image components
export { default as ResponsiveImage } from './Image/ResponsiveImage.astro';
export { default as ResponsiveImageWithSkeleton } from './Image/ResponsiveImageWithSkeleton.astro';
```

### 4.2 Layout Index

**Create:** `src/components/layout/index.ts`

```typescript
export { default as Header } from './Header.astro';
export { default as HeaderLink } from './HeaderLink.astro';
export { default as Footer } from './Footer.astro';
export { default as BaseHead } from './BaseHead.astro';
```

### 4.3 Content Index

**Create:** `src/components/content/index.ts`

```typescript
export { default as PostCard } from './PostCard.astro';
export { default as ProjectCard } from './ProjectCard.astro';
export { default as StayCard } from './StayCard.astro';
export { default as ProjectsToolbar } from './ProjectsToolbar.astro';
export { default as FormattedDate } from './FormattedDate.astro';
```

### 4.4 Sections Index

**Create:** `src/components/sections/index.ts`

```typescript
export { default as HomeHero } from './HomeHero.astro';
export { default as LatestPosts } from './LatestPosts.astro';
export { default as LatestProjects } from './LatestProjects.astro';
export { default as LatestStays } from './LatestStays.astro';
export { default as SupportBox } from './SupportBox.astro';
```

**Duration:** 15 minutes  
**Risk:** Low  
**Testing Required:** Yes

---

## Phase 5: Testing & Validation

### 5.1 Build Test

```bash
npm run build
```

**Expected Result:** Build completes without errors  
**If errors:** Check import paths, missing files

### 5.2 Development Server Test

```bash
npm run dev
```

**Test Pages:**
- ✅ Homepage (`/`)
- ✅ Blog listing (`/blog`)
- ✅ Blog post pages
- ✅ Projects listing (`/projects`)
- ✅ Individual project pages
- ✅ Stays listing (`/stays`)
- ✅ Individual stay pages
- ✅ About pages
- ✅ Search functionality

### 5.3 Component Functionality Test

- ✅ Navigation (Header, HeaderLink)
- ✅ Dropdowns work on all pages
- ✅ Cards render correctly
- ✅ Images load with skeleton states
- ✅ Save to list functionality
- ✅ Ad boxes display
- ✅ Subscribe drawer opens/closes
- ✅ Analytics loads

**Duration:** 30 minutes  
**Risk:** Medium  
**Testing Required:** Yes (critical)

---

## Phase 6: Update Documentation

### 6.1 Update README

Add section about component organization:

```markdown
## Component Organization

We use a hybrid organizational structure:

- **ui/** - Reusable design system components
- **layout/** - Page layout components (header, footer, etc.)
- **content/** - Content display components (cards, toolbars)
- **sections/** - Larger page sections
- **features/** - Feature-specific functionality
- **utility/** - Meta and utility components

See COMPONENT-STRUCTURE.md for detailed guidelines.
```

### 6.2 Create Component Documentation

**Create:** `COMPONENT-STRUCTURE.md`

Document the new structure with examples and guidelines for adding new components.

**Duration:** 20 minutes  
**Risk:** Low  
**Testing Required:** No

---

## Rollback Plan

If critical issues arise, rollback steps:

1. **Git Revert:**
   ```bash
   git reset --hard HEAD~1
   ```

2. **Manual Rollback:**
   - Reverse all `mv` commands
   - Restore old import paths
   - Test build

**Keep a backup branch before starting:**
```bash
git checkout -b backup-before-component-migration
git push origin backup-before-component-migration
git checkout main
```

---

## Timeline Summary

| Phase | Duration | Risk Level |
|-------|----------|------------|
| 1. Create structure | 2 min | Low |
| 2. Move components | 30 min | Medium-High |
| 3. Update imports | 45 min | High |
| 4. Create indexes | 15 min | Low |
| 5. Testing | 30 min | Medium |
| 6. Documentation | 20 min | Low |
| **TOTAL** | **~2.5 hours** | **Medium-High** |

---

## Pre-Migration Checklist

- [ ] Create backup branch
- [ ] Commit all current changes
- [ ] Run tests (if available)
- [ ] Document current build status
- [ ] Ensure development environment is working
- [ ] Review import paths in critical files
- [ ] Set aside uninterrupted time block

---

## Post-Migration Checklist

- [ ] All pages load without errors
- [ ] Navigation works
- [ ] All dropdowns functional
- [ ] Cards display correctly
- [ ] Images load properly
- [ ] Save functionality works
- [ ] Build succeeds
- [ ] No console errors
- [ ] Git commit with clear message
- [ ] Update team (if applicable)

---

## Future Enhancements

After successful migration, consider:

1. **Extract base components** (Button, Badge, Card base)
2. **Implement design tokens** in `ui/` folder
3. **Add Storybook** for component documentation
4. **Create component tests**
5. **Add TypeScript types** for component props
6. **Implement barrel exports** for cleaner imports

---

## Need Help?

**Issue:** Import errors after moving components  
**Solution:** Use global search/replace in your editor:
- VS Code: `Cmd+Shift+F` → Search: `@/components/Header` → Replace: `@/components/layout/Header`

**Issue:** Build fails  
**Solution:** Check console for specific import errors, fix paths one by one

**Issue:** Components not rendering  
**Solution:** Check browser console for runtime errors, verify file paths

---

## Notes

- This migration is **non-breaking** to end users (no functionality changes)
- Focus on **layout components first** (Header, Footer, BaseHead) as they're most critical
- Test after each major phase
- Use VS Code's search/replace for efficient import updates
- Consider doing this during a low-traffic period

---

**Ready to proceed?** Start with Phase 1 and work through systematically.
