---
import type { CollectionEntry } from "astro:content";
import MainLayout from "./MainLayout.astro";

type Props = CollectionEntry<"projects">["data"];

const { properties } = Astro.props;
const title = properties.pTitle || "Default Title";
---

<MainLayout title={title}>
  <section class="bg-white dark:bg-gray-900">
    <div
      class="gap-8 items-center py-8 px-4 mx-auto max-w-screen-xl xl:gap-16 md:grid md:grid-cols-2 sm:py-16 lg:px-6"
    >
      <img data-pagefind-meta="image" class="w-full rounded-lg" src={properties.pImageURL} alt="" />
      <div class="mt-4 md:mt-0">
        {
          properties.pVerify && (
            <div class="inline-flex items-center gap-1">
              <svg
                class="h-5 w-5 text-primary-700 dark:text-primary-500"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  fill-rule="evenodd"
                  d="M12 2c-.791 0-1.55.314-2.11.874l-.893.893a.985.985 0 0 1-.696.288H7.04A2.984 2.984 0 0 0 4.055 7.04v1.262a.986.986 0 0 1-.288.696l-.893.893a2.984 2.984 0 0 0 0 4.22l.893.893a.985.985 0 0 1 .288.696v1.262a2.984 2.984 0 0 0 2.984 2.984h1.262c.261 0 .512.104.696.288l.893.893a2.984 2.984 0 0 0 4.22 0l.893-.893a.985.985 0 0 1 .696-.288h1.262a2.984 2.984 0 0 0 2.984-2.984V15.7c0-.261.104-.512.288-.696l.893-.893a2.984 2.984 0 0 0 0-4.22l-.893-.893a.985.985 0 0 1-.288-.696V7.04a2.984 2.984 0 0 0-2.984-2.984h-1.262a.985.985 0 0 1-.696-.288l-.893-.893A2.984 2.984 0 0 0 12 2Zm3.683 7.73a1 1 0 1 0-1.414-1.413l-4.253 4.253-1.277-1.277a1 1 0 0 0-1.415 1.414l1.985 1.984a1 1 0 0 0 1.414 0l4.96-4.96Z"
                  clip-rule="evenodd"
                />
              </svg>
              <p class="text-sm font-medium text-gray-900 dark:text-white">
                {properties.pVerify}
              </p>
            </div>
          )
        }
        <h1
		class="mb-4 mt-2 text-4xl tracking-tight font-extrabold text-gray-900 dark:text-white"
        >
          {properties.pTitle}
        </h1>
        <p class="mb-1">
          <span class="font-medium text-gray-900 dark:text-white"
            >Location(s):
          </span><span class="text-gray-500 dark:text-gray-400">
            {
              Array.isArray(properties.pCountry)
                ? properties.pCountry.map((country, index) => (
                    <>
                      <a
                        href={`/projects/${country.toLowerCase().replace(/\s+/g, "-")}`}
                      >
                        {country}
                      </a>
                      {index < properties.pCountry.length - 1 ? ", " : ""}
                    </>
                  ))
                : properties.pCountry
            }
          </span>
        </p>
        <p class="mb-5">
          <span class="font-medium text-gray-900 dark:text-white"
            >Locale(s):
          </span><span class="text-gray-500 dark:text-gray-400">
            {
              Array.isArray(properties.pLocale)
                ? properties.pLocale.map((locale, index) => (
                    <>
                      <a
                        href={`/projects/${locale.toLowerCase().replace(/\s+/g, "-")}`}
                      >
                        {locale}
                      </a>
                      {index < properties.pLocale.length - 1 ? ", " : ""}
                    </>
                  ))
                : properties.pCountry
            }
          </span>
        </p>
        <a
          href={properties.pURL}
          class="inline-flex items-center text-white bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:focus:ring-primary-900"
        >
          Visit Website
          <svg
            class="ml-2 -mr-1 w-5 h-5"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
            ><path
              fill-rule="evenodd"
              d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
              clip-rule="evenodd"></path></svg
          >
        </a>
      </div>
    </div>
  </section>
  <main data-pagefind-body
    class="pt-8 pb-16 lg:pt-16 lg:pb-24 bg-white dark:bg-gray-900 antialiased"
  >
    <div class="flex justify-between px-4 mx-auto max-w-screen-xl">
      <article
        class="mx-auto w-full max-w-2xl format format-sm sm:format-base lg:format-lg format-blue dark:format-invert"
      >
        <h2>About this project</h2>
        <p class="mb-1">
          <span class="font-medium text-gray-900 dark:text-white"
            >Categories:
          </span><span class="text-gray-500 dark:text-gray-400">
            {
              Array.isArray(properties.pCategory)
                ? properties.pCategory.map((category, index) => (
                    <>
                      {category}
                      {index < properties.pCategory.length - 1 ? ", " : ""}
                    </>
                  ))
                : properties.pCategory
            }
          </span>
        </p>
        <p class="mb-1">
          <span class="font-medium text-gray-900 dark:text-white"
            >Cost:
          </span><span class="text-gray-500 dark:text-gray-400">
            {
              Array.isArray(properties.pCost)
                ? properties.pCost.map((cost, index) => (
                    <>
                      {cost}
                      {index < properties.pCost.length - 1 ? ", " : ""}
                    </>
                  ))
                : properties.pCost
            }
          </span>
        </p>
        <p class="mb-1">
          <span class="font-medium text-gray-900 dark:text-white"
            >Organiser:
          </span><span class="text-gray-500 dark:text-gray-400">
            {properties.pOrganiser}
          </span>
        </p>
        <slot />
      </article>
    </div>
  </main>
</MainLayout>
