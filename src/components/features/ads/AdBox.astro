---
import { Image } from 'astro:assets';
import AdAvatar from '../../../assets/ads/getyourguide-avatar.png';

// Editable content variables
const heading = "Download the GetYourGuide App";
const tagline = "Discover more than 75,000 tours and activities worldwide";
const description = "Download the GetYourGuide app to discover and book unforgettable travel experiences anywhere in the world. Save 5% on your first booking with code GIVEBACKGUIDE5 (valid only for new app installations).";
const ctaText = "Download now for free";
const ctaUrl = "https://gyg.me/givebackguide-app";
const sponsoredLabel = "Sponsored";

// Editable style variables
// Use GetYourGuide brand orange as the border/button colour (hex: #ff5533).
// The container uses a layered background (white on top, coloured layer behind)
// so `gradientBorderColors` must be a valid background-image value (use a 1-stop gradient).
const gradientBorderColors = "linear-gradient(135deg,#ff5533 0%,#ff5533 100%)"; // Solid-looking gradient for border
const buttonGradient = "from-[#ff5533] to-[#ff5533]"; // Solid brand colour as gradient fallback
const buttonGradientHover = "from-[#e64b2c] to-[#e64b2c]"; // Slightly darker on hover
const accentColor = "text-[#ff5533] dark:text-[#ffb29b]"; // Brand accent for light/dark
---

<div class="relative bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6 overflow-hidden dark:from-gray-800 dark:to-gray-900 border-2 border-transparent bg-clip-padding" style={`background-image: linear-gradient(white, white), ${gradientBorderColors}; background-origin: border-box; background-clip: padding-box, border-box; --tw-gradient-from: rgb(249 250 251); --tw-gradient-to: rgb(243 244 246);`}>
  <!-- Subtle background pattern -->
  <div class="absolute inset-0 opacity-5 dark:opacity-10" style="background-image: radial-gradient(circle at 1px 1px, currentColor 1px, transparent 0); background-size: 20px 20px;"></div>
  
  <div class="relative">
    <!-- Sponsored label -->
    <div class="flex items-center gap-1.5 mb-3">
      <aside class={`text-xs uppercase font-semibold tracking-wide ${accentColor}`}>
        {sponsoredLabel}
      </aside>
    </div>
    
    <!-- Main heading with icon -->
    <div class="flex items-start gap-3 mb-3">
      <div class="flex-shrink-0 mt-0.5">
        <Image 
          src={AdAvatar} 
          alt="Giveback Guide Avatar" 
          class="w-10 h-10 rounded-lg object-cover ring-2 ring-[#ff5533]/20 dark:ring-[#ff5533]/30"
        />
      </div>
      <div class="flex-1">
        <h3 class="text-xl font-bold text-gray-900 dark:text-white m-0 mb-1 leading-tight">
          {heading}
        </h3>
        <p class={`text-xs font-medium ${accentColor}`}>
          {tagline}
        </p>
      </div>
    </div>
    
    <!-- Description -->
    <p class="mb-5 text-sm leading-relaxed text-gray-700 dark:text-gray-300">
      {description}
    </p>
    
    <!-- Enhanced CTA button -->
    <a
      href={ctaUrl}
      class={`group inline-flex items-center justify-center gap-2 w-full sm:w-auto px-5 py-3 text-sm font-semibold text-white bg-gradient-to-r ${buttonGradient} rounded-lg hover:${buttonGradientHover} focus:ring-4 focus:outline-none focus:ring-[#ffb29b] dark:focus:ring-[#993e2a] transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5`}
      aria-label={`Learn more about ${heading.toLowerCase()}`}
    >
      <span>{ctaText}</span>
      <svg
        class="w-4 h-4 transition-transform duration-200 group-hover:translate-x-1"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 14 10"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M1 5h12m0 0L9 1m4 4L9 9"></path>
      </svg>
    </a>
  </div>
</div>

<style>
  /* Dark mode gradient border fix */
  @media (prefers-color-scheme: dark) {
    [style*="background-clip: padding-box, border-box"] {
        /* Dark-mode fallback for border background-clip: use brand-based darker tone */
        --tw-gradient-from: rgb(255 85 51);
        --tw-gradient-to: rgb(153 62 42);
    }
  }
</style>